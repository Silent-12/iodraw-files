<mxGraphModel dx="748" dy="424" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0"><root><mxCell id="0"/><mxCell id="1" parent="0"/><mxCell id="yA8KQIGrtWLf13eOsWty-6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;fontFamily=Verdana;fontSize=26;" parent="1" source="yA8KQIGrtWLf13eOsWty-3" target="yA8KQIGrtWLf13eOsWty-5" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-3" value="连接到ws服务器" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="67" y="210" width="120" height="60" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;fontFamily=Verdana;fontSize=26;" parent="1" source="yA8KQIGrtWLf13eOsWty-5" target="yA8KQIGrtWLf13eOsWty-7" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-5" value="服务端socket-id入库" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="67" y="300" width="120" height="60" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-4" value="消息处理流程图" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=26;fontFamily=Verdana;labelBackgroundColor=none;fontStyle=1" parent="1" vertex="1"><mxGeometry x="286" y="50" width="256" height="20" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-33" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;fontFamily=Verdana;fontSize=20;fontColor=#000000;" parent="1" source="yA8KQIGrtWLf13eOsWty-7" target="yA8KQIGrtWLf13eOsWty-32" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-7" value="通知客户端拉取会话列表sys_session_list" style="rounded=0;whiteSpace=wrap;html=1;labelBackgroundColor=none;fontFamily=Verdana;fontSize=12;" parent="1" vertex="1"><mxGeometry x="62" y="390" width="130" height="60" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-34" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;fontFamily=Verdana;fontSize=20;fontColor=#000000;" parent="1" source="yA8KQIGrtWLf13eOsWty-32" target="yA8KQIGrtWLf13eOsWty-14" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-32" value="通过vuex获取消息，并存入store，计算未读消息数量，显示在主页" style="rounded=0;whiteSpace=wrap;html=1;labelBackgroundColor=none;fontFamily=Verdana;fontSize=12;" parent="1" vertex="1"><mxGeometry x="62" y="480" width="130" height="60" as="geometry"/></mxCell><mxCell id="lDkGvCYrpzoBVYI45od1-2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="yA8KQIGrtWLf13eOsWty-14" target="lDkGvCYrpzoBVYI45od1-1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-14" value="当用户点击某个用户时，再通过userId拉取详细聊天记录" style="rounded=0;whiteSpace=wrap;html=1;labelBackgroundColor=none;fontFamily=Verdana;fontSize=12;" parent="1" vertex="1"><mxGeometry x="62" y="570" width="128" height="60" as="geometry"/></mxCell><mxCell id="lDkGvCYrpzoBVYI45od1-1" value="查看消息记录后，通知服务端消息已读" style="rounded=0;whiteSpace=wrap;html=1;labelBackgroundColor=none;fontFamily=Verdana;fontSize=12;" vertex="1" parent="1"><mxGeometry x="62" y="670" width="128" height="60" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-18" value="消息获取" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontFamily=Verdana;fontSize=20;fontStyle=1" parent="1" vertex="1"><mxGeometry x="60" y="160" width="130" height="20" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-23" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;fontFamily=Verdana;fontSize=26;" parent="1" source="yA8KQIGrtWLf13eOsWty-24" target="yA8KQIGrtWLf13eOsWty-26" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-36" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;fontFamily=Verdana;fontSize=20;fontColor=#000000;" parent="1" source="yA8KQIGrtWLf13eOsWty-24" target="yA8KQIGrtWLf13eOsWty-35" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-24" value="定时检查ws连接情况" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="357" y="210" width="120" height="60" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-35" value="改变vuex中的消息服务器连接状态=0" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="560" y="210" width="120" height="60" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-25" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;fontFamily=Verdana;fontSize=26;" parent="1" source="yA8KQIGrtWLf13eOsWty-26" target="yA8KQIGrtWLf13eOsWty-28" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-49" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;fontFamily=Verdana;fontSize=12;fontColor=#000000;" parent="1" source="yA8KQIGrtWLf13eOsWty-26" target="yA8KQIGrtWLf13eOsWty-48" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-26" value="发送前检查vuex中的服务器状态是否=1" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="357" y="300" width="120" height="60" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-48" value="展示对应提示文案并调用ws连接检查" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="590" y="300" width="120" height="60" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-27" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;fontFamily=Verdana;fontSize=12;" parent="1" source="yA8KQIGrtWLf13eOsWty-28" target="yA8KQIGrtWLf13eOsWty-29" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-40" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;fontFamily=Verdana;fontSize=12;fontColor=#000000;" parent="1" source="yA8KQIGrtWLf13eOsWty-28" target="yA8KQIGrtWLf13eOsWty-39" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-28" value="通过socket发送到服务端，服务端查socketId表，转发给指定用户" style="rounded=0;whiteSpace=wrap;html=1;labelBackgroundColor=none;fontFamily=Verdana;fontSize=12;" parent="1" vertex="1"><mxGeometry x="352" y="390" width="130" height="60" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-39" value="入库sys_msg，设未读字段=1，会话表中的未读数量同步增加" style="rounded=0;whiteSpace=wrap;html=1;labelBackgroundColor=none;fontFamily=Verdana;fontSize=12;" parent="1" vertex="1"><mxGeometry x="562" y="390" width="138" height="60" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-46" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;fontFamily=Verdana;fontSize=12;fontColor=#000000;" parent="1" source="yA8KQIGrtWLf13eOsWty-29" target="yA8KQIGrtWLf13eOsWty-45" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-29" value="入库sys_msg，设未读字段=1" style="rounded=0;whiteSpace=wrap;html=1;labelBackgroundColor=none;fontFamily=Verdana;fontSize=12;" parent="1" vertex="1"><mxGeometry x="353" y="500" width="128" height="60" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-45" value="客户端通过vuex中的当前用户去判断srcId和userId，如果==则加入消息列表" style="rounded=0;whiteSpace=wrap;html=1;labelBackgroundColor=none;fontFamily=Verdana;fontSize=12;" parent="1" vertex="1"><mxGeometry x="353" y="600" width="128" height="70" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-30" value="发送消息" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontFamily=Verdana;fontSize=20;fontStyle=1" parent="1" vertex="1"><mxGeometry x="347" y="160" width="130" height="20" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-37" value="无法连接" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontFamily=Verdana;fontSize=12;fontColor=#000000;" parent="1" vertex="1"><mxGeometry x="460" y="220" width="120" height="10" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-41" value="发送失败" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontFamily=Verdana;fontSize=12;fontColor=#000000;" parent="1" vertex="1"><mxGeometry x="495" y="390" width="50" height="20" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-42" value="发送成功" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontFamily=Verdana;fontSize=12;fontColor=#000000;" parent="1" vertex="1"><mxGeometry x="431" y="470" width="50" height="20" as="geometry"/></mxCell><mxCell id="yA8KQIGrtWLf13eOsWty-50" value="服务器状态=0" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontFamily=Verdana;fontSize=12;fontColor=#000000;" parent="1" vertex="1"><mxGeometry x="481" y="300" width="105" height="20" as="geometry"/></mxCell></root></mxGraphModel>